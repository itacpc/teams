{% extends "layout.html" %}

{% block body %}
  <div class="card">
    <img class="card-picture" src="{{ url_for('static', filename='flags/' + uni + '.png') }}">
    <div class="card-info">
      Hello,
      <h1>{{ student_full }}</h1>
      <a href="{{ url_for('index') }}">Back to list of universities</a>
      <a href="{{ url_for('uni_page', uni=uni) }}">Back to university</a>
    </div>
  </div>

  <div class="card">
    <div class="card-info">
        <h2>Team membership information</h2>

        <div>
            {% if team_name %}
                <p>You're part of team <strong>{{ team_name }}</strong> which is currently formed by these students:</p>
                <ol>
                    {% for m in team_members %}
                        <li>{{ m[0] }}</li>
                    {% endfor %}
                </ol>
                <p>If you want to invite new members (remember that maximum 3 people can be in the same team) you can use the following link:</p>
                <pre style="font-size: larger">https://teams.itacpc.it/{{ uni }}/join/{{ secret }}</pre>

                <p>If you want to <strong>leave your own team</strong> then <a href="{{ url_for('leave_team') }}">click here</a>.</p>
            {% else %}
                <p>Hi {{ student_full }}, you're currently not part of any team. But you can <strong>create</strong> or <strong>join</strong> one!</p>
            {% endif %}
        </div>
    </div>
  </div>

  <div class="card special">
    <div class="card-info">
      <h2>Contest access credentials</h2>

      {% if team_name %}
        {% if team_credentials %}
          <p>Use the following credentials to access <a href="https://judge.itacpc.it/" target="_blank">the contest</a>.</p>
          <ul class="large-font">
            {% for k in ('username', 'password') %}
              <li>
                <strong>{{k.title()}}</strong>: <code>{{team_credentials[k]}}</code>
              </li>
            {% endfor %}
          </ul>
          <p>These credentials will be valid until <strong>{{team_credentials['expiration']}}</strong>, after which they will be disabled.</p>
        {% else %}
          <p>The credentials to access <a href="https://judge.itacpc.it/" target="_blank">the contest</a> will appear here some time before the start of the contest.</p>
          <p style="margin-top: 8px">Make sure to check every now and then!</p>
        {% endif %}
      {% else %}
        <p>In order to be assigned credentials to access <a href="https://judge.itacpc.it/" target="_blank">the contest</a> you must first be part of a team.</p>
      {% endif %}
    </div>
  </div>

  <div class="card">
    <div class="card-info">
        <h2>Update personal information</h2>

        <div>
            <p>If you need to, here you can update your information:</p>

            {% from "_formhelpers.html" import render_field %}
            <form method=post>
              <dl>
                <dt>Email Address
                <dd><strong>{{ email }}</strong></dd>
            
                <dt>{{ form.subscribed_option.label }}</dt>
                <dd>{{ form.subscribed_option(checked=initial_subscribed_value) }}</dd>

                {{ render_field(form.olinfo_handle) }}
                {{ render_field(form.codeforces_handle) }}
                {{ render_field(form.kattis_handle) }}
                {{ render_field(form.github_handle) }}
              </dl>
              <p><input type="submit" value="Update profile">
            </form>
        </div>
    </div>
  </div>
{% endblock %}
